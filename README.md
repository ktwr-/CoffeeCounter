# コーヒーカウンター

研究室等に代表される小規模な組織でネスレのバリスタを利用している際に，飲んだコーヒー数において金額を計算してくれるWebソフトウェアです。

# 環境

php,sql,webサーバであれば動くはずです。私の環境は以下の通り

||バージョン|
|:--|:--|
|php|5.6|
|mysql|14.14|
|nginx|1.6.2|


# 事前準備

sqlsetting.phpにmysqlのユーザとパスワードを入力します．

次にSQLのデータベースを用意します．
作成するデータベース名は`coffee_counter`

用意するテーブルは
`user`,`backnumber`,`coffeexxxx`の3つです。

`coffeexxxx`のxxxxには年と月をいれます．例えば2018年1月なら`coffee1801`という具合です


```
#データベース作成
mysql> create database coffee_counter;

# 各種テーブル情報
mysql> show create table user;                                                                                                                                                                                     
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                                                                                          |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| user  | CREATE TABLE `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(100) DEFAULT NULL,
  `visible` tinyint(1) DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8 |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> show create table backnumber;
+------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table      | Create Table                                                                                                                                                           |
+------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| backnumber | CREATE TABLE `backnumber` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tabelname` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

1 row in set (0.00 sec)

mysql>  show create table coffee1801;
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table      | Create Table                                                                                                                                                                                                                                                                                                                                        |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| coffee1801 | CREATE TABLE `coffee1801` (
  `id` int(11) DEFAULT NULL,
  `coffee` int(11) DEFAULT NULL,
  `stick` int(11) DEFAULT NULL,
  `extra` int(11) DEFAULT '0',
  `comment` varchar(100) DEFAULT NULL,
  KEY `coffee1801_ibfk_1` (`id`),
  CONSTRAINT `coffee1801_ibfk_1` FOREIGN KEY (`id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
```

最後にdbname.txtに`coffeexxxx`を書き込んで準備完了です.

# 機能

各種ページで行えることについて

## index.php

コーヒーやネスレブライトのスティック、その他コーヒー関連で紙コップ購入等の別費が発生したものを送信してデータベースに記録できます

ユーザ作成もこのページで行います

## account.php

金額計算を行います．その月の金額を入力すると各々の金額を計算します

## setting.php

ユーザ名変更やコーヒーが次の月に移行した際にテーブルリセット、またコーヒーを飲まなくなったらHome画面からその人の名前を除くこともできます．

## backnumber.php

過去の記録がみれます


